<?xml version="1.0" encoding="UTF-8"?>
<!--
  Created by IntelliJ IDEA.
  User: yohai
  Date: 07/03/2021
  Time: 18:50
-->
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">

<h:head>
    <title>Games Table</title>
    <h:outputStylesheet library="css" name="primeflex.css"/>
</h:head>

<h:body>
    <h5>Games Table</h5>
    <h:form id="form">
        <div class="card">
            <p:growl id="messages" showDetail="true"/>

            <!-- Toolbar above the games data table - always on page -->
            <p:toolbar>
                <p:toolbarGroup>
                    <p:commandButton value="New" icon="pi pi-plus" actionListener="#{gamesTableBean.openNewGameForm}"
                                     update=":form:manage-product-content" oncomplete="PF('addGameDialog').show()"
                                     styleClass="ui-button-success" style="margin-right: .5rem">
                        <p:resetInput target=":form:manage-product-content"/>
                    </p:commandButton>
                </p:toolbarGroup>
            </p:toolbar>

            <!-- Games Data Table - Always on page -->
            <p:dataTable id="games-table" value="#{gamesTableBean.games}" var="game" rowKey="#{game.id}">
                <f:facet name="header">
                    <div class="products-table-header">
                        <span style="font-weight: bold">PRODUCTS</span>
                    </div>
                </f:facet>
                <p:column headerText="ID">
                    <h:outputText value="#{game.id}" />
                </p:column>
                <p:column headerText="Name">
                    <h:outputText value="#{game.name}" />
                </p:column>
                <p:column headerText="Publisher">
                    <h:outputText value="#{game.publisher}" />
                </p:column>
                <p:column headerText="Developer">
                    <h:outputText value="#{game.developer}" />
                </p:column>
                <p:column headerText="Release Date">
                    <h:outputText value="#{game.releaseDate}" />
                </p:column>
                <p:column headerText="Price">
                    <h:outputText value="#{game.price}" style="font-weight: 700">
                        <f:convertNumber currencySymbol="$" type="currency"/>
                    </h:outputText>
                </p:column>
                <p:column headerText="Stock">
                    <h:outputText value="#{game.stock}" />
                </p:column>
                <p:column headerText="Condition">
                    <h:outputText value="#{game.condition.toString()}" />
                </p:column>
            </p:dataTable>

            <!-- New game form - modal -->
            <p:dialog header="Add New Game" showEffect="fade" modal="true"
                      widgetVar="addGameDialog" responsive="true">
                <p:outputPanel id="manage-product-content" styleClass="ui-fluid">
                    <p:outputPanel rendered="#{gamesTableBean.isNewGameForm}">
                        <div class="p-field">
                            <p:outputLabel for="name">Name</p:outputLabel>
                            <p:inputText id="name" value="#{addGameFormBean.name}" required="true"/>
                        </div>
                        <div class="p-formgrid p-grid">
                            <div class="p-field p-col">
                                <p:outputLabel for="publisher">Developer</p:outputLabel>
                                <p:inputText id="developer" value="#{addGameFormBean.developer}" required="true"/>
                            </div>
                            <div class="p-field p-col">
                                <p:outputLabel for="publisher">Publisher</p:outputLabel>
                                <p:inputText id="publisher" value="#{addGameFormBean.publisher}" required="true"/>
                            </div>
                        </div>

                        <div class="p-field">
                            <p:outputLabel for="release-date" value="Release Date"/>
                            <p:datePicker id="release-date" value="#{addGameFormBean.releaseDate}" required="true"/>
                        </div>

                        <div class="p-formgrid p-grid">
                            <div class="p-field p-col">
                                <p:outputLabel for="price">Price</p:outputLabel>
                                <p:inputNumber id="price" value="#{addGameFormBean.price}"
                                               symbol="$" symbolPosition="s"
                                               decimalSeparator="." thousandSeparator="," required="true"/>
                            </div>
                            <div class="p-field p-col">
                                <p:outputLabel for="stock">Stock</p:outputLabel>
                                <p:spinner id="stock" min="0" value="#{addGameFormBean.stock}" required="true"/>
                            </div>
                        </div>

                        <div class="p-field">
                            <p:selectOneMenu id="condition" value="#{addGameFormBean.condition}" required="true">
                                <f:selectItems value="#{addGameFormBean.conditions}" />
                            </p:selectOneMenu>
                        </div>
                    </p:outputPanel>
                </p:outputPanel>

                <f:facet name="footer">
                    <p:commandButton value="Save" icon="pi pi-check" actionListener="#{addGameFormBean.save}"
                                     update="manage-product-content" process="manage-product-content @this"/>
                </f:facet>
            </p:dialog>
        </div>
    </h:form>
</h:body>

</html>